<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper-couple">
	<insert id="insertCoupleInputDB"
		parameterType="lx.edu.springboot.vo.CoupleInputVO"
		>
		INSERT INTO inputcouple
		(USER_NAME,USER_BIRTH,USER_GENDER,USER_TIME, PARTNER_NAME, PARTNER_BIRTH, PARTNER_GENDER, PARTNER_TIME)
		VALUES
		(#{userName}, #{userBirth}, #{userGender}, #{userTime}, #{partnerName},  #{partnerBirth}, #{partnerGender}, #{partnerTime}
		)
	</insert>
	
	<!-- 궁합결과 couple_result db에 저장 -->
	<insert id="insertCoupleResultDB"
		parameterType="lx.edu.springboot.vo.CoupleResultVO"
		>
		INSERT INTO resultcouple
		(USER_NAME, PARTNER_NAME, SCORE, LOVE, PARTNER, TOTAL, RESULT_TYPE)
		VALUES
		(#{userName}, #{partnerName}, #{score}, #{love}, #{partner}, #{total}, 2)
	</insert>
	
	<!-- 리스트에 보이는 결과 가져오기 -->
	<select id="getCoupleList" resultType="lx.edu.springboot.vo.CoupleResultVO" parameterType="int">
			select RESULTCOUPLE_ID ,USER_NAME, PARTNER_NAME
			from resultcouple
	</select>
		<!-- 파트너 전체 리스트 가져오기 -->
	<select id="selectAllPartners"
		resultType="lx.edu.springboot.vo.PartnerVO">
		SELECT
		PARTNER_ID AS partnerID,
		PARTNER_NAME AS partnerName,
		PARTNER_BIRTH AS partnerBirth,
		PARTNER_GENDER AS partnerGender,
		PARTNER_TIME AS partnerTime
		FROM project1.partnerinfo
	</select>
	
	<!-- 사주 목록에서 넘어갈때 -->
	<select id="selectResultCouple" parameterType="int" resultType="lx.edu.springboot.vo.CoupleResultVO">
		select RESULTCOUPLE_ID resultCoupleId,
 				USER_NAME userName,
				PARTNER_NAME partnerName,
				SCORE score,
				PARTNER partner,
             	TOTAL total,
            	LOVE love
		from resultcouple
		where RESULTCOUPLE_ID = #{id}
	</select>
	
<<<<<<< HEAD
	<!-- <delete id="deleteDB" parameterType="int"> delete from addrbook where 
		ab_id = #{abId} </delete> -->
=======
	<delete id="deleteCouple" parameterType="int">
		delete from resultcouple where RESULTCOUPLE_ID = #{id} 
	</delete>
>>>>>>> eunho
</mapper>

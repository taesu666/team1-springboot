<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>궁합 결과</title>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</head>
<body>
	<div
		class="container d-flex flex-column justify-content-center align-items-center">
		<div class="h3 mt-5">
			<p>궁합 결과</p>
		</div>
		<div class="result-box">
			<div class="d-flex justify-content-between">
				<p>
					<strong>당신 이름:</strong> <span th:text="${result.userName}"></span>
				</p>
				<p>
					<strong>상대 이름:</strong> <span th:text="${result.partnerName}"></span>
				</p>

			</div>
			<div class="">
				<p>
					<strong>궁합 점수:</strong> <span th:text="${result.score}"></span> 점
				</p>

			</div>
			<p>
				<strong>분석 결과:</strong>
			</p>
			<p th:text="${result.total}"></p>

			<select name="coupleDetail" onchange="handleOnChange(this)">
				<option value="love">애정운</option>
				<option value="partner">동업운</option>
			</select>

			<p id="result" style="white-space: pre-wrap; margin-top: 1em;"></p>


		</div>

	</div>

	<div class="d-flex justify-content-around">
		<button type="button" class="btn btn-primary"
			onclick="location.href='/coupleinput'">다시 입력하기</button>
		<button type="button" class="btn btn-secondary"
			onclick="location.href='/conversation_list_couple.do'">목록으로 가기</button>
	</div>
	<script th:inline="javascript">
		function handleOnChange(e) {
			const value = e.value;
			let text = "";

			if (value === "love") {
				text = /*[[${result.love}]]*/"";
			} else if (value === "partner") {
				text = /*[[${result.partner}]]*/"";
			}

			document.getElementById('result').innerText = text;
		}

		window.onload = function() {
			const select = document
					.querySelector("select[name='coupleDetail']");
			handleOnChange(select);
		}
	</script>
</body>
</html>